<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS Library Matrix Algorithm Visualization</title>


    <script type="module">
        import {matrixvis} from './src/index.js';

        const canvas = new matrixvis.CanvasRenderer("myCanvas");
        const max = new matrixvis.MatrixElement("max", 5, true, true);
        max.x = 75;
        max.y = 100;
        max.setSize(40,40);
        canvas.add(max, "max");

        const min = new matrixvis.MatrixElement("min", 0, false, true);
        min.x = 75;
        min.y = 175;
        min.setSize(50,50)
        min.randomize(0, 3);
        canvas.add(min, "min");

        const A = new matrixvis.Matrix("A", [[0,0,0,0],[],[],[]], true);
        A.x = 200;
        A.y = 100;
        A.setSize(50,50);
        A.randomize(0,20);
        canvas.add(A, "A");

        const B = new matrixvis.Matrix("B", [[0,0,0],[],[]]);
        B.x = 500;
        B.y = 100;
        B.randomize(20, 50);
        canvas.add(B, "B");
        canvas.vars.i=0;

        const firstStep = () => {
            console.log("first");
            canvas.get("A").elements[0][0].changeable = false;
            canvas.get("max").changeable = false;
            canvas.vars.i = 2;
        }

        const secondStep = () => {
            console.log("comparing");
            canvas.vars.i = 1;
            canvas.compare(canvas.get("max"), canvas.get("A").elements[0][0])
        }

        const thirdStep = () => {
            console.log("final step");
            if (canvas.get("max").value < canvas.get("A").elements[0][0].value){
                canvas.get("max").updateValue(canvas.get("A").elements[0][0].value);
            }
            canvas.stopComparingAndCopying();
            canvas.get("A").elements[0][0].setGreenColor();
        }

        canvas.setSteps(
            [firstStep, secondStep, thirdStep]
        )


    </script>
</head>
<body>
  <h1>JS Library Matrix Algorithm Visualisation </h1>
    <canvas id="myCanvas" width="750" height="500" style="border:1px solid black"></canvas>
</body>
</html>